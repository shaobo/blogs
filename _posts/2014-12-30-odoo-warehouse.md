---
layout: post
title: Odoo warehouse
comments: true
permalink: "odoo-warehouse"
---

warehouse may have many stock locations , like accounts, stock locations are hierarchical, so you can carry out analyses at various levels of detail.

``` sql
--parent is in field location_id
select a.id,a.complete_name ||'->' || b.complete_name from stock_location a,stock_location b where a.location_id = b.id order by 2;

--one stock warehouse has many stock locations,by default odoo only enables one stock location ,'Physical Locations / WH / Stock'
select lot_stock_id 'Location Stock',view_location_id 'View Location',wh_pack_stock_loc_id 'Packing Location',wh_input_stock_loc_id 'Input Location' ,wh_qc_stock_loc_id 'Quality Control Location' ,wh_output_stock_loc_id 'Output Location' from stock_warehouse;

select id,location_id,complete_name from stock_location;
```
| id |   parent    |  name                                                 | active 
| ---| ----------- | ----------------------------------------------------- | ------ 
| 11 |           1 | Physical Locations / WH                               | true 
| 12 |          11 | `Physical Locations / WH / Stock`                     | true 
| 13 |          11 | Physical Locations / WH / Input                       | false
| 14 |          11 | Physical Locations / WH / Quality Control             | false
| 15 |          11 | Physical Locations / WH / Output                      | false
| 16 |          11 | Physical Locations / WH / Packing Zone                | false
| 17 |           7 | Physical Locations / Your Company: Transit Location   | false


Production is manufacturing, Purchase is the acquisition of goods from another party, and Procurement is either one or both of those.*sure if there is plenty of stocks,Procurement wouldn't be triggered at all*

The set of stock requirements is generated by procurement orders.
In normal system use, you do not need to worry about procurement orders because they are automatically generated by OpenERP and the user will usually work on the results of a procurement: a production order, a purchase order, a sales order and a task.

The procurement order will then be responsible for calculating a proposal for automatic procurement for the product concerned. This procurement will start a task, a purchase order for the supplier or a production depending on the product configuration.

procurement.rule
pull rules of routes:
buy from supplier 
Move From Another Location: ship , make to order

__Counter-Part Locations Properties__

•  Procurement,
•  Production,
•  Inventory
A procurement location is a temporary location for stock moves that have not yet been finalized by the
scheduler. When the system does not yet know if procurement is to be done by a purchase or production,
OpenERP uses the counterpart location Procurement. In this location, you will find everything that has
not yet been planned by the system. The quantities of product in this location cancel each other out

/Technical Settings:
Manage multiple locations and warehouses

Manage Push and Pull inventory flows

stock_warehouse

```python
'route_ids': fields.many2many('stock.location.route', 'stock_route_warehouse', 'warehouse_id', 'route_id', 'Routes', domain="[('warehouse_selectable', '=', True)]", help='Defaults routes through the warehouse'),
        'reception_steps': fields.selection([
            ('one_step', 'Receive goods directly in stock (1 step)'),
            ('two_steps', 'Unload in input location then go to stock (2 steps)'),
            ('three_steps', 'Unload in input location, go through a quality control before being admitted in stock (3 steps)')], 'Incoming Shipments', 
                                            help="Default incoming route to follow", required=True),
        'delivery_steps': fields.selection([
            ('ship_only', 'Ship directly from stock (Ship only)'),
            ('pick_ship', 'Bring goods to output location before shipping (Pick + Ship)'),
            ('pick_pack_ship', 'Make packages into a dedicated location, then bring them to the output location for shipping (Pick + Pack + Ship)')], 'Outgoing Shippings', 
                                           help="Default outgoing route to follow", required=True),
```

__stock\_location__

```python
'removal_strategy_id': fields.many2one('product.removal', 'Removal Strategy', help="Defines the default method used for suggesting the exact location (shelf) where to take the products from, which lot etc. for this location. This method can be enforced at the product category level, and a fallback is made on the parent locations if none is set here."),

'putaway_strategy_id': fields.many2one('product.putaway', 'Put Away Strategy', help="Defines the default method used for suggesting the exact location (shelf) where to store the products. This method can be enforced at the product category level, and a fallback is made on the parent locations if none is set here."),
```

__stock.picking.type__
Type of Operations,such as WH/IN WH/OUT,WH/INT

id  |name               |default\_location\_src\_id |default\_location\_dest\_id |return\_picking\_type\_id 
--- |------------------ |----------------------- |------------------------ |---------------------- 
1   |Receipts           |8                       |12                       |2                      
2   |Delivery Orders    |12                      |9                        |1                      
3   |Internal Transfers |12                      |12                       |                 

__stock.picking__
All Operations
'move_type': fields.selection([('direct', 'Partial'), ('one', 'All at once')], 'Delivery Method','specifies goods to be deliver partially or all at once'


__Routes__  
A Route is a collection of procurement rules and push rules. Routes can be applied on: 
* Product * Warehouse * Product Category * Sale Order Line

1) pull rules:

id  |name                                 
----|--------------------------------- 
1   |Make To Order                        
2   |YourCompany: Receipt in 1 step       
3   |YourCompany: Ship Only                       
8   |Buy                                  


__procurement order__

ir\_cron __procurement_order.py run\_scheduler__
> Call the scheduler in order to check the running procurements (super method), to check the minimum stock rules and the  availability of moves.
also Create procurement based on Orderpoint
Schedule Results can be verified under menu Schedulers>Procurements

procurement order is based on procurement.rule and stock.warehouse.orderpoint(Reordering Rules)

```sql
select id,name,procure_method,route_id,location_id,location_src_id,warehouse_id,picking_type_id from procurement_rule where active='true'  order by 1
```
procurement.rules
'''
    A rule describe what a procurement should do; produce, buy, move, ...
'''

id |name                              |procure\_method |route\_id |location\_id |location\_src\_id |warehouse\_id 
---|----------------------------------|-------------- |-------- |----------- |--------------- |--- 
1  |WH: Stock->Customers              |make\_to\_stock|3        |9           |12              |1            
2  |WH: Stock->Customers MTO          |make\_to\_order|1        |9           |12              |1            
9  |YourCompany:Buy                   |make\_to\_stock|8        |12          |                |1            


** 4 types of stock_pickings,each stock_picking has many stock_moves



duplicate fields like stock_location/warehouse in stock_move and procurement

Reordering Rules stock.warehouse.orderpoint Defines Minimum stock rules

To automatically make stock replenishment proposals, you can use Reordering rules: if the virtual stock for the given location is lower than the minimum stock indicated in the rule, the system will automatically propose a procurement to increase the level of virtual stock to the maximum level given in the rule
![orderpoint]({{ site.baseurl }}/images/odoo/stock/orderpoint.png)

group various procurements in one order
'''
    The procurement group class is used to group products together
    when computing procurements. (tasks, physical products, ...)

    The goal is that when you have one sale order of several products
    and the products are pulled from the same or several location(s), to keep
    having the moves grouped into pickings that represent the sale order.

    Used in: sales order (to group delivery order lines like the so), pull/push
    rules (to pack like the delivery order), on orderpoints (e.g. for wave picking
    all the similar products together).

    Grouping is made only if the source and the destination is the same.
    Suppose you have 4 lines on a picking from Output where 2 lines will need
    to come from Input (crossdock) and 2 lines coming from Stock -> Output As
    the four procurement orders will have the same group ids from the SO, the
    move from input will have a stock.picking with 2 grouped lines and the move
    from stock will have 2 grouped lines also.

    The name is usually the name of the original document (sale order) or a
    sequence computed if created manually.
    '''


[SAP Stock Removal Strategies]
(http://help.sap.com/saphelp_scm700_ehp02/helpdata/en/4c/b4cf0d0c056642e10000000a15822b/content.htm?current_toc=/en/e4/cecb53ad377114e10000000a174cb4/plain.htm&show_children=true)

FIFO/LIFO stock valuation is by default provided in Odoo V8.  By default system will do stock valuation based on "FIFO" method itself.  You able to see "Removal Strategy" under Locations, where you can set FIFO / LIFO, if you didn't choose removal strategy, then the system will choose FIFO as default.

To check this, you need to configure your product correctly.  Choose Costing method as "Real Price" & Valuation as "Real Time".
[fifo ask](https://www.odoo.com/forum/help-1/question/is-it-available-fifo-in-odoo-8-56398)

[crossdock concept](http://www.aalhysterforklifts.com.au/index.php/about/blog-post/what_is_cross_docking_understanding_the_concept_definition)


